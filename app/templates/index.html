<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>PonyCanion - Reproductor Musical</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/player.css') }}">
</head>
<body>
    <!-- Header m贸vil -->
    <div class="mobile-header">
        <div class="mobile-header-content">
            <h1><i class="fas fa-fire"></i> PonyCanion</h1>
            <button class="mobile-menu-btn" onclick="toggleMobileMenu()">
                <i class="fas fa-bars"></i>
            </button>
        </div>
    </div>
    
    <!-- Navegaci贸n m贸vil -->
    <div class="mobile-nav" id="mobileNav">
        <div class="mobile-nav-items">
            <div class="mobile-nav-item active" onclick="loadSection('home'); toggleMobileMenu();">
                <i class="fas fa-home"></i><span>Inicio</span>
            </div>
            <div class="mobile-nav-item" onclick="loadSection('search'); toggleMobileMenu();">
                <i class="fas fa-search"></i><span>Buscar</span>
            </div>
            <div class="mobile-nav-item" onclick="loadSection('library'); toggleMobileMenu();">
                <i class="fas fa-music"></i><span>Tu m煤sica</span>
            </div>
        </div>
    </div>
   
    <div class="app-container">
        <div class="app-header"></div>
        
        <!-- Sidebar para PC -->
        <div class="sidebar">
            <div class="logo">
                <h1><i class="fas fa-fire"></i> PonyCanion</h1>
                <div class="tagline">Tu m煤sica, a todo volumen</div>
            </div>
            <div class="nav-section">
                <div class="nav-item active" onclick="loadSection('home')">
                    <i class="fas fa-home"></i><span>Inicio</span>
                </div>
                <div class="nav-item" onclick="loadSection('search')">
                    <i class="fas fa-search"></i><span>Buscar</span>
                </div>
                <div class="nav-item" onclick="loadSection('library')">
                    <i class="fas fa-music"></i><span>Tu m煤sica</span>
                </div>
            </div>
            <div class="playlists-section">
                <h3>Tus Playlists</h3>
                <div id="playlistsSidebar"></div>
            </div>
        </div>
       
        <div class="main-content-wrapper">
            <div class="main-content">
                <div class="content-header">
                    <div class="search-container">
                        <div class="search-box">
                            <input type="text" id="searchInput" placeholder="Busca canciones, artistas o 谩lbumes...">
                            <button id="searchButton"><i class="fas fa-search"></i></button>
                        </div>
                    </div>
                </div>
               
                <div id="homeSection" class="content-section active">
                    <div class="section-header">
                        <div>
                            <h2>Bienvenido de nuevo</h2>
                            <div class="subtitle">Tus canciones recientes y recomendaciones</div>
                        </div>
                    </div>
                    <div class="tracks-grid" id="recentGrid"></div>
                    
                    <div class="section-header">
                        <div>
                            <h2>Recomendaciones para ti</h2>
                            <div class="subtitle">Basado en tu actividad de escucha</div>
                        </div>
                    </div>
                    <div class="tracks-grid" id="recommendationsGrid"></div>
                </div>
               
                <div id="searchSection" class="content-section">
                    <div class="section-header">
                        <div>
                            <h2>Resultados de b煤squeda</h2>
                            <div class="subtitle" id="searchStats">Escribe para buscar m煤sica</div>
                        </div>
                    </div>
                    <div class="tracks-grid" id="searchResultsGrid"></div>
                </div>
               
                <div id="librarySection" class="content-section">
                    <div class="section-header">
                        <div>
                            <h2>Tu biblioteca</h2>
                            <div class="subtitle">Tus playlists y colecciones</div>
                        </div>
                        <button onclick="createPlaylist()" style="padding: 10px 20px; font-size: 14px; background: var(--primary); color: white; border: none; border-radius: 10px; cursor: pointer;">
                            <i class="fas fa-plus"></i> Nueva playlist
                        </button>
                    </div>
                    <div class="tracks-grid" id="playlistsGrid"></div>
                </div>
            </div>
        </div>
       
        <!-- Player Bar -->
        <div class="player-bar">
            <div class="now-playing">
                <img id="currentTrackImage" src="https://images.unsplash.com/photo-1511671782779-c97d3d27a1d4?w=400&h=400&fit=crop&q=80" alt="Album">
                <div class="track-info">
                    <h4 id="currentTrackTitle">No hay canci贸n seleccionada</h4>
                    <p id="currentTrackArtist">Selecciona una canci贸n para comenzar</p>
                </div>
            </div>
           
            <div class="volume-control">
                <i class="fas fa-volume-up" id="volumeIcon"></i>
                <input type="range" id="volumeSlider" min="0" max="100" value="80">
            </div>
           
            <div class="player-controls">
                <div class="control-buttons">
                    <button class="control-btn" id="shuffleBtn">
                        <i class="fas fa-random"></i>
                    </button>
                    <button class="control-btn" id="previousBtn">
                        <i class="fas fa-step-backward"></i>
                    </button>
                    <button class="control-btn play-btn" id="playPauseBtn">
                        <i class="fas fa-play" id="playPauseIcon"></i>
                    </button>
                    <button class="control-btn" id="nextBtn">
                        <i class="fas fa-step-forward"></i>
                    </button>
                    <button class="control-btn" id="repeatBtn">
                        <i class="fas fa-redo" id="repeatIcon"></i>
                    </button>
                </div>
                <div class="progress-bar">
                    <span class="progress-time" id="currentTime">0:00</span>
                    <div class="progress-track" id="progressBar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <span class="progress-time" id="totalTime">0:00</span>
                </div>
            </div>
        </div>
    </div>
   
    <!-- YouTube Player Container (INVISIBLE) -->
    <div id="youtubePlayerContainer" style="display: none; position: fixed; top: -1000px; left: -1000px; width: 0; height: 0;">
        <div id="youtubePlayer"></div>
    </div>
   
   <script>
    // Forzar API Key y hacer que funcione en m贸vil
    window.YOUTUBE_API_KEY = 'AIzaSyCM_CtJicmYaaTPcgJjApwXv9gej8m2b9Y';
    window.HAS_API_KEY = true;
    
    // Para m贸vil en segundo plano
    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('/sw.js').catch(console.error);
    }
    
    // Evitar que el navegador duerma en m贸vil
    let wakeLock = null;
    if ('wakeLock' in navigator) {
        navigator.wakeLock.request('screen').then(wl => {
            wakeLock = wl;
        });
    }
    
    console.log(' PonyCanion - Optimizado para m贸vil');
</script>
    <script src="{{ url_for('static', filename='js/search.js') }}"></script>
    <script src="{{ url_for('static', filename='js/player.js') }}"></script>
</body>
</html>